
d = {'end': {'cpu_utilization_percent': {'host_system': 98.01256804444557,
                                     'host_total': 98.01258771828867,
                                     'host_user': 0,
                                     'remote_system': 0,
                                     'remote_total': 0,
                                     'remote_user': 0},
         'streams': [{'udp': {'bits_per_second': 290693891.025834,
                              'bytes': 184692400,
                              'end': 5.082801,
                              'jitter_ms': 0,
                              'lost_packets': 0,
                              'lost_percent': 0,
                              'out_of_order': 0,
                              'packets': 127550,
                              'seconds': 5.082801,
                              'sender': True,
                              'socket': 5,
                              'start': 0}}],
         'sum': {'bits_per_second': 290693891.025834,
                 'bytes': 184692400,
                 'end': 5.082801,
                 'jitter_ms': 0,
                 'lost_packets': 0,
                 'lost_percent': 0,
                 'packets': 127550,
                 'seconds': 5.082801,
                 'sender': True,
                 'start': 0},
         'sum_received': {'bits_per_second': 0,
                          'bytes': 0,
                          'end': 5.082801,
                          'jitter_ms': 0,
                          'lost_packets': 0,
                          'lost_percent': 0,
                          'packets': 0,
                          'seconds': 5.082801,
                          'sender': False,
                          'start': 0},
         'sum_sent': {'bits_per_second': 290693891.025834,
                      'bytes': 184692400,
                      'end': 5.082801,
                      'jitter_ms': 0,
                      'lost_packets': 0,
                      'lost_percent': 0,
                      'packets': 127550,
                      'seconds': 5.082801,
                      'sender': True,
                      'start': 0}},
 'intervals': [{'streams': [{'bits_per_second': 288842300.9584226,
                             'bytes': 36127600,
                             'end': 1.000618,
                             'omitted': False,
                             'packets': 24950,
                             'seconds': 1.0006179809570312,
                             'sender': True,
                             'socket': 5,
                             'start': 0}],
                'sum': {'bits_per_second': 288842300.9584226,
                        'bytes': 36127600,
                        'end': 1.000618,
                        'omitted': False,
                        'packets': 24950,
                        'seconds': 1.0006179809570312,
                        'sender': True,
                        'start': 0}},
               {'streams': [{'bits_per_second': 294075411.7227458,
                             'bytes': 36764720,
                             'end': 2.000762,
                             'omitted': False,
                             'packets': 25390,
                             'seconds': 1.0001440048217773,
                             'sender': True,
                             'socket': 5,
                             'start': 1.000618}],
                'sum': {'bits_per_second': 294075411.7227458,
                        'bytes': 36764720,
                        'end': 2.000762,
                        'omitted': False,
                        'packets': 25390,
                        'seconds': 1.0001440048217773,
                        'sender': True,
                        'start': 1.000618}},
               {'streams': [{'bits_per_second': 293495511.2677756,
                             'bytes': 36677840,
                             'end': 3.000514,
                             'omitted': False,
                             'packets': 25330,
                             'seconds': 0.9997519850730896,
                             'sender': True,
                             'socket': 5,
                             'start': 2.000762}],
                'sum': {'bits_per_second': 293495511.2677756,
                        'bytes': 36677840,
                        'end': 3.000514,
                        'omitted': False,
                        'packets': 25330,
                        'seconds': 0.9997519850730896,
                        'sender': True,
                        'start': 2.000762}},
               {'streams': [{'bits_per_second': 284918237.7708007,
                             'bytes': 35620800,
                             'end': 4.000683,
                             'omitted': False,
                             'packets': 24600,
                             'seconds': 1.000169038772583,
                             'sender': True,
                             'socket': 5,
                             'start': 3.000514}],
                'sum': {'bits_per_second': 284918237.7708007,
                        'bytes': 35620800,
                        'end': 4.000683,
                        'omitted': False,
                        'packets': 24600,
                        'seconds': 1.000169038772583,
                        'sender': True,
                        'start': 3.000514}},
               {'streams': [{'bits_per_second': 292103919.6119983,
                             'bytes': 36504080,
                             'end': 5.000439,
                             'omitted': False,
                             'packets': 25210,
                             'seconds': 0.9997559785842896,
                             'sender': True,
                             'socket': 5,
                             'start': 4.000683}],
                'sum': {'bits_per_second': 292103919.6119983,
                        'bytes': 36504080,
                        'end': 5.000439,
                        'omitted': False,
                        'packets': 25210,
                        'seconds': 0.9997559785842896,
                        'sender': True,
                        'start': 4.000683}},
               {'streams': [{'bits_per_second': 291140076.0639674,
                             'bytes': 2997360,
                             'end': 5.082801,
                             'omitted': False,
                             'packets': 2070,
                             'seconds': 0.08236200362443924,
                             'sender': True,
                             'socket': 5,
                             'start': 5.000439}],
                'sum': {'bits_per_second': 291140076.0639674,
                        'bytes': 2997360,
                        'end': 5.082801,
                        'omitted': False,
                        'packets': 2070,
                        'seconds': 0.08236200362443924,
                        'sender': True,
                        'start': 5.000439}}],
 'start': {'accepted_connection': {'host': '192.168.1.132', 'port': 53558},
           'connected': [{'local_host': '172.19.0.3',
                          'local_port': 5201,
                          'remote_host': '192.168.1.132',
                          'remote_port': 35867,
                          'socket': 5}],
           'cookie': 'optxo2upzb7laxvc3brptkqoa6xws5dji3ov',
           'rcvbuf_actual': 212992,
           'sndbuf_actual': 212992,
           'sock_bufsize': 0,
           'system_info': 'Linux e4111949f65c 5.15.0-70-generic #77-Ubuntu SMP '
                          'Tue Mar 21 14:02:37 UTC 2023 x86_64',
           'target_bitrate': 0,
           'test_start': {'blksize': 1448,
                          'blocks': 0,
                          'bytes': 0,
                          'duration': 5,
                          'num_streams': 1,
                          'omit': 0,
                          'protocol': 'UDP',
                          'reverse': 1,
                          'target_bitrate': 0,
                          'tos': 0},
           'timestamp': {'time': 'Tue, 25 Apr 2023 19:56:51 UTC',
                         'timesecs': 1682452611},
           'version': 'iperf 3.12'}}

import plotly.express as px


x, y = [], []
for i, d in enumerate(d['intervals']):
    x.append(i+1)
    y.append(d['sum']['bits_per_second'])

print(x)
print(y)

df = {'Segment': x, 'Speed': y}
fig = px.line(df, x='Segment', y='Speed', title="Sorted Input", markers=True, line_shape='spline')
fig.show()
